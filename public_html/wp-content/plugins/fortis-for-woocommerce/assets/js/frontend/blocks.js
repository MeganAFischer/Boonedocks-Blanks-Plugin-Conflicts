(()=>{"use strict";var e={20:(e,t,o)=>{var n=o(609),r=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var n,s={},l=null,d=null;for(n in void 0!==o&&(l=""+o),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!c.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:l,ref:d,props:s,_owner:a.current}}},848:(e,t,o)=>{e.exports=o(20)},609:e=>{e.exports=window.React}},t={};const o=window.wp.i18n,n=window.wc.wcBlocksRegistry,r=window.wp.htmlEntities,i=window.wc.wcSettings;var a,c=function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(848);let s=(0,i.getSetting)("fortis_data",{});(0,o.__)("Fortis Payments","woo-gutenberg-products-block");const l=e=>{const{PaymentMethodLabel:t}=e.components,n=s.title?s.title:(0,o.__)("Credit / Debit Card","woo-gutenberg-products-block");return(0,c.jsx)(t,{text:n})},d=e=>(jQuery(".wc-block-components-radio-control__input").change((function(){"fortis"!=jQuery("input[value='fortis']:checked").val()?jQuery(".wc-block-components-checkout-place-order-button").show():(jQuery(".wc-block-components-payment-methods__save-card-info").hide(),jQuery(".wc-block-components-checkout-place-order-button").hide())})),jQuery(".wc-block-components-checkout-place-order-button").hide(),jQuery("style").append(" #validate-btn:active, #validate-btn:focus { outline-style: unset;  opacity: 0.2 !important; } #validate-btn:hover { opacity: 1 !important; }"),wp.element.createElement("div",null,wp.element.createElement("div",{id:"fortispayment"}),wp.element.createElement("input",{id:"validate-btn",type:"button",value:s.fortis.button_text,style:{backgroundColor:s.fortis.colorButtonActionBackground,color:s.fortis.colorButtonActionText,padding:"13px 32px",borderRadius:"5px",boxShadow:"0px 10px 14px -7px #276873",cursor:"pointer",fontFamily:"Arial",fontSize:"20px",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #3d768a"},onClick:async e=>{e.preventDefault(),!0===function(){const e=jQuery("#email").val();if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e))return alert("Please enter a valid email address."),!1;const t=jQuery("#shipping-first_name").val(),o=jQuery("#billing-first_name").val();if(!t&!o)return alert("Please enter your first name."),!1;const n=jQuery("#shipping-last_name").val(),r=jQuery("#billing-last_name").val();if(!n&!r)return alert("Please enter your last name."),!1;const i=jQuery("#shipping-address_1").val(),a=jQuery("#billing-address_1").val();if(!i&!a)return alert("Please enter your address."),!1;s.address=i||a;const c=jQuery("#shipping-city").val(),l=jQuery("#billing-city").val();if(!c&!l)return alert("Please enter your city."),!1;s.address=c||l;const d=jQuery("#shipping-postcode").val(),u=jQuery("#billing-postcode").val();return!d&!u?(alert("Please enter your postcode."),!1):(s.postcode=d||u,"on"===jQuery(".wc-block-components-checkbox .wc-block-components-checkbox__input[type=checkbox]:checked").val()?(s.country=jQuery("#shipping-country input").val(),s.state=jQuery("#shipping-state input").val(),jQuery(".wc-block-components-payment-methods__save-card-info").show(),!0):o?r?a?(s.address=a,l?(s.address=l,u?(s.postcode=u,s.country=jQuery("#billing-country input").val(),s.state=jQuery("#billing-state input").val(),jQuery(".wc-block-components-payment-methods__save-card-info").show(),!0):(alert("Please enter your postcode."),!1)):(alert("Please enter your city."),!1)):(alert("Please enter your billing address."),!1):(alert("Please enter your last name."),!1):(alert("Please enter your first name."),!1))}()&&jQuery.ajax({url:s.ajax_url,async:!1,data:{action:"fortis_ajax_request"},success:function(e){!function(e){let t=e.indexOf("{"),o=e.lastIndexOf("}")+1,n=e.substring(t,o),r=JSON.parse(n);s.postcode=r.postcode,s.address=r.address,s.city=r.city,s.state=r.state,s.country=r.country,s.client_token=r.client_token,s.order_id=r.order_id,s.transaction_api_id=r.transaction_api_id}(e),function(){const e=new Commerce.elements(s.client_token),t=setInterval((function(){const o=jQuery("#fortispayment");o.length>0&&0==o.contents().length&&(clearInterval(t),e.create({container:"#fortispayment",theme:s.fortis.theme,environment:s.fortis.environment,floatingLabels:s.floatingLabels,showValidationAnimation:s.showValidationAnimation,language:"en-us",showReceipt:!1,showSubmitButton:!0,hideAgreementCheckbox:s.hideAgreementCheckbox,defaultCountry:"US",view:s.view,appearance:{colorButtonSelectedBackground:s.fortis.colorButtonSelectedBackground,colorButtonSelectedText:s.fortis.colorButtonSelectedText,colorButtonActionBackground:s.fortis.colorButtonActionBackground,colorButtonActionText:s.fortis.colorButtonActionText,colorButtonBackground:s.fortis.colorButtonBackground,colorButtonText:s.fortis.colorButtonText,colorFieldBackground:s.fortis.colorFieldBackground,colorFieldBorder:s.fortis.colorFieldBorder,colorText:s.fortis.colorText,colorLink:s.fortis.colorLink,fontSize:s.fortis.fontSize,marginSpacing:s.fortis.marginSpacing,borderRadius:s.fortis.borderRadius},fields:{additional:[{name:"description",required:!0,value:s.order_id,hidden:!0},{name:"transaction_api_id",hidden:!0,value:s.transaction_api_id}],billing:[{name:"address",value:s.address,required:!1,hidden:!0},{name:"city",value:s.city,required:!1,hidden:!0},{name:"postal_code",value:s.postcode,required:!1,hidden:!0},{name:"country",value:s.country,required:!1,hidden:!0},{name:"state",value:s.state,required:!1,hidden:!0}]}}))}));e.on("ready",(function(e){document.getElementById("shipping-postcode")?.addEventListener("change",(e=>{p()}))})),e.on("ready",(function(e){document.getElementById("billing-postcode")?.addEventListener("change",(e=>{p()}))})),e.on("ready",(function(e){document.getElementById("billing-city")?.addEventListener("change",(e=>{p()}))})),e.on("ready",(function(e){document.getElementById("shipping-city")?.addEventListener("change",(e=>{p()}))})),e.on("done",(function(e){document.getElementById("fortis_result").value=JSON.stringify(e);const t=document.querySelectorAll('[id^="checkbox-control-"]');let o="";for(let e=0;e<t.length;e++)(t[e].offsetWidth>0||t.offsetHeight[e]>0)&&t[e].parentNode.querySelector(":scope span").textContent.startsWith("Save payment")&&(o=t[e].checked?"on":"off",jQuery("#fortis_SaveAccount").val(o));document.getElementById("fortis_detail_form").submit()})),e.on("error",(function(e){document.getElementById("fortis_result").value=JSON.stringify(e)})),jQuery("#validate-btn").hide()}()}})}}),wp.element.createElement("form",{id:"fortis_detail_form",role:"form",action:s.url,method:"post",name:"fortis_payment_form"},wp.element.createElement("input",{type:"hidden",id:"fortis_order_id",name:"fortis_order_id",value:s.order_id}),wp.element.createElement("input",{type:"hidden",id:"fortis_result",name:"fortis_result"}),wp.element.createElement("input",{type:"hidden",id:"fortis_SaveAccount",name:"fortis_SaveAccount"})))),u={name:"fortis",label:(0,c.jsx)(l,{}),placeOrderButtonLabel:(0,o.__)("Place Order","woo-gutenberg-products-block"),content:(0,c.jsx)(d,{}),edit:(0,c.jsx)("div",{}),canMakePayment:()=>!0,ariaLabel:(0,r.decodeEntities)(s.title||(0,o.__)("Payment via Fortis","woo-gutenberg-products-block")),supports:{showSaveOption:s.saveAccount,showSavedCards:!0,features:null!==(a=s.supports)&&void 0!==a?a:[]}};function p(){jQuery("#fortispayment iframe").remove(),jQuery("#validate-btn").show()}(0,n.registerPaymentMethod)(u)})();